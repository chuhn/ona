From: Christopher Huhn <C.Huhn@gsi.de>
Date: Mon, 12 Nov 2018 17:34:54 +0100
Subject: Allow @ signs in login names so email addresses can be used

---
 www/include/functions_auth.inc.php | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/www/include/functions_auth.inc.php b/www/include/functions_auth.inc.php
index f724f12..e4ee6cf 100644
--- a/www/include/functions_auth.inc.php
+++ b/www/include/functions_auth.inc.php
@@ -68,7 +68,7 @@ function get_authentication($login_name='', $login_password='') {
     $js = "el('loginmsg').innerHTML = '<span style=\"color: green;\">Success!</span>'; setTimeout('removeElement(\'tt_loginform\')',1000);";
 
     // Validate the userid was passed and is "clean"
-    if (!preg_match('/^[A-Za-z0-9.\-_]+$/', $login_name)) {
+    if (!preg_match('/^[A-Za-z0-9.\-_@]+$/', $login_name)) {
         $js = "el('loginmsg').innerHTML = 'Bad username format';";
         printmsg("ERROR => Login failure for {$login_name}: Bad username format", 0);
         return(array(1, $js));
